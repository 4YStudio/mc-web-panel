

export const messages = {
    zh: {
        common: {
            cancel: '取消',
            confirm: '确认',
            execute: '执行',
            save: '保存',
            delete: '删除',
            edit: '编辑',
            search: '搜索',
            loading: '加载中...',
            success: '操作成功',
            error: '操作失败',
            yes: '是',
            no: '否',
            enabled: '已启用',
            disabled: '已禁用',
            unknown: '未知',
            actions: '操作',
            name: '名称',
            size: '大小',
            time: '时间',
            status: '状态',
            switchTheme: '切换主题',
            switchLang: 'Switch Language',
            logout: '退出登录',
            upload: '上传',
            download: '下载',
            refresh: '刷新',
            close: '关闭',
            add: '添加',
            remove: '移除',
            mode_gui: '图形模式',
            mode_text: '文本模式',
            player: '玩家',
            player_name: '玩家名称'
        },
        login: {
            title: 'MC 面板',
            prompt_scan: '请使用 Google Authenticator 扫描此二维码。',
            placeholder_code: '请输入 2FA 验证码',
            btn_verify: '验证身份',
            toast_fail: '验证码错误',
            toast_error: '请求失败'
        },
        sidebar: {
            title: 'MC 面板',
            dashboard: '控制台',
            settings: '服务器设置',
            mods: '模组管理',
            files: '文件管理',
            backups: '备份管理',
            auth: '认证管理',
            voicechat: '语音设置',
            players: '玩家管理'
        },
        dashboard: {
            console_title: '控制台',
            start: '启动服务器',
            stop: '停止服务器',
            state_running: '运行中',
            state_stopped: '已停止',
            server_info: 'MC 服务器信息',
            online_players: '在线人数',
            system_resource: '系统资源',
            cpu_usage: 'CPU 使用率',
            mem_usage: '内存',
            send_cmd_placeholder: '发送指令...',
            send: '发送',
            toast_sent: '已发送',
            system: '系统'
        },
        files: {
            path: '路径',
            operate: '批量操作',
            new_folder: '新建文件夹',
            new_file: '新建文件',
            upload_tips: '拖拽文件到这里上传',
            total: '共 {count} 项',
            move: '移动',
            copy: '复制',
            compress: '压缩',
            disable: '禁用',
            enable: '启用',
            modal_move_title: '移动/复制文件',
            modal_move_dest: '目标路径 (相对于根目录)',
            modal_compress_title: '压缩文件',
            modal_compress_name: '压缩包名称 (.zip)',
            modal_new_folder: '文件夹名称',
            modal_new_file: '文件名称'
        },
        mods: {
            title: '模组列表',
            upload_mod: '上传模组',
            upload_placeholder: '点击或拖拽上传 .jar 文件',
            search_placeholder: '搜索模组...',
            version: '版本',
            empty: '暂无模组'
        },
        players: {
            title: '玩家管理',
            online_players: '在线玩家',
            no_online: '当前没有玩家在线',
            whitelist: '白名单',
            ops: '管理员 (OP)',
            bans: '黑名单',
            kick: '踢出',
            ban: '封禁',
            teleport: '传送玩家',
            gamemode: '修改模式',
            clear_inv: '清空背包',
            kill: '击杀玩家'
        },
        backups: {
            create_snap: '创建快照',
            create_diff: '创建增量备份',
            restore: '还原',
            tips: '提示: 回档操作将先停止服务器，并自动为当前存档创建备份。',
            list_title: '备份列表',
            config: '配置',
            type_full: '全量',
            type_diff: '增量',
            confirm_restore_title: '确认回档',
            confirm_restore_msg: '确定要回档到 {name} 吗？服务器将先停止，当前存档会自动备份。',
            progress_restoring: '正在回档...',
            progress_unzipping: '解压中...',
            restore_success: '回档成功！',
            config_groups: {
                basic: '基础设置',
                schedule: '计划与频率',
                purge: '清理策略',
                advanced: '高级选项'
            },
            config_labels: {
                enabled: '启用自动备份',
                type: '备份类型',
                activity: '仅活动时备份',
                save: '备份前保存',
                freq_min: '最小间隔(小时)',
                freq_max: '最大间隔(小时)',
                freq_uptime: '使用运行时间',
                freq_schedule: '定时计划',
                purge_size: '最大占用(GB)',
                purge_days: '保留天数',
                purge_count: '保留数量',
                compression: '压缩等级',
                buffer: 'Buffer',
                path: '备份路径',
                blacklist: '黑名单'
            }
        },
        easyauth: {
            users: '用户管理',
            registered: '已注册',
            unregistered: '未注册',
            password: '修改密码',
            unregister: '注销/删除',
            confirm_unregister: '确定要注销玩家',
            config: '配置',
            new_password_prompt: '输入新密码 (>4 字符):',
            new_password_placeholder: '新密码...',
            config_groups: {
                login_session: '登录与会话',
                global_password: '全局密码',
                others: '其他',
                restrictions: '限制 (未登录)',
                rules: '规则'
            },
            config_labels: {
                premium_auto_login: '正版自动登录',
                offline_by_default: '默认离线模式',
                session_timeout: '会话超时 (秒)',
                max_login_tries: '最大登录尝试次数',
                kick_timeout: '踢出超时 (秒)',
                enable_global_password: '启用全局密码',
                single_use_global_password: '单次使用',
                hide_player_coords: '隐藏坐标',
                debug: '调试模式',
                allow_chat: '允许聊天',
                allow_commands: '允许命令',
                allow_movement: '允许移动',
                allow_block_interaction: '允许交互',
                allow_block_breaking: '允许破坏',
                hide_inventory: '隐藏背包',
                player_invulnerable: '无敌',
                min_password_length: '最小密码长度',
                max_password_length: '最大密码长度',
                username_regexp: '用户名正则',
                enable_server_side_translation: '服务端翻译'
            }
        },
        voice: {
            title: '简单语音配置 (Simple Voice Chat)',
            general: '基础设置',
            port: '端口',
            host: '语音主机',
            host_desc: '公网IP或域名，必须设置否则玩家无法连接',
            password: '连接密码',
            saved: '配置已保存 (需重启服务器)',
            restart_required: '修改配置后需要重启服务器才能生效。',
            quality_distance: '质量与距离',
            max_distance: '最大距离',
            crouch_distance: '潜行距离',
            whisper_distance: '耳语距离',
            bitrate: '比特率',
            max_packet_weight: '最大包权重'
        },
        properties: {
            title: '服务器设置 (server.properties)',
            filter: '筛选设置...',
            restart_tips: '修改后需要重启服务器才能生效。',
            key: '键',
            value: '值',
            groups: {
                general: '基础设置',
                gameplay: '游戏规则',
                world: '世界生成',
                spawning: '生成控制',
                network: '性能与网络'
            },
            labels: {
                motd: '服务器描述',
                port: '端口',
                max_players: '最大玩家数',
                online_mode: '在线模式',
                white_list: '白名单',
                enable_rcon: '启用 RCON',
                gamemode: '游戏模式',
                force_gamemode: '强制游戏模式',
                difficulty: '难度',
                hardcore: '极限模式',
                pvp: 'PVP',
                allow_flight: '允许飞行',
                level_seed: '种子',
                level_type: '世界类型',
                level_name: '世界名称',
                generate_structures: '生成结构',
                allow_nether: '允许下界',
                spawn_monsters: '生成怪物',
                spawn_animals: '生成动物',
                spawn_npcs: '生成村民',
                view_distance: '视距',
                simulation_distance: '模拟距离',
                max_tick_time: '最大Tick时间',
                rate_limit: '速率限制'
            }
        },
        panel_settings: {
            title: '面板设置',
            basic: '基础设置',
            server: '服务器配置',
            security: '安全设置',
            advanced: '高级设置',
            port: '面板端口',
            port_desc: '修改后需要重启面板',
            default_lang: '默认语言',
            theme: '主题模式',
            theme_light: '浅色',
            theme_dark: '深色',
            theme_auto: '跟随系统',
            jar_name: 'JAR文件名',
            jar_name_desc: '服务器启动文件',
            java_args: 'Java参数',
            java_args_desc: '每行一个参数,如 -Xms1G',
            secret: '2FA密钥',
            secret_masked: '密钥已隐藏',
            session_timeout: '会话超时(天)',
            max_log_history: '日志历史条数',
            monitor_interval: '监控刷新间隔(ms)',
            reset_2fa: '重置2FA',
            restart_panel: '重启面板',
            restart_now: '立即重启',
            restart_later: '暂不重启',
            save_success: '配置已保存',
            restart_required: '需要重启面板才能生效',
            restart_confirm: '配置已保存,需要重启面板才能生效。是否立即重启?',
            reset_2fa_confirm: '确定要重置2FA吗?这将使所有已登录的设备失效,您需要重新扫描二维码设置。',
            restart_warning: '重启面板将断开所有连接,确定继续吗?',
            reset_2fa_success: '2FA已重置',
            reset_2fa_instruction: '请使用认证器扫描新的二维码',
            restarting: '面板正在重启...',
            validation_error: '验证失败'
        }
    },
    en: {
        common: {
            cancel: 'Cancel',
            confirm: 'Confirm',
            execute: 'Execute',
            save: 'Save',
            delete: 'Delete',
            edit: 'Edit',
            search: 'Search',
            loading: 'Loading...',
            success: 'Success',
            error: 'Failed',
            yes: 'Yes',
            no: 'No',
            enabled: 'Enabled',
            disabled: 'Disabled',
            unknown: 'Unknown',
            actions: 'Actions',
            name: 'Name',
            size: 'Size',
            time: 'Time',
            status: 'Status',
            switchTheme: 'Switch Theme',
            switchLang: '切换语言',
            logout: 'Logout',
            upload: 'Upload',
            download: 'Download',
            refresh: 'Refresh',
            close: 'Close',
            add: 'Add',
            remove: 'Remove',
            mode_gui: 'GUI Mode',
            mode_text: 'Text Mode',
            player: 'Player',
            player_name: 'Player Name'
        },
        login: {
            title: 'MC Panel',
            prompt_scan: 'Use Google Authenticator to scan this QR code.',
            placeholder_code: 'Enter 2FA Code',
            btn_verify: 'Verify Identity',
            toast_fail: 'Invalid Code',
            toast_error: 'Request Failed'
        },
        sidebar: {
            title: 'MC Panel',
            dashboard: 'Dashboard',
            settings: 'Settings',
            mods: 'Mods',
            files: 'Files',
            backups: 'Backups',
            auth: 'Auth',
            voicechat: 'Voice Chat',
            players: 'Players'
        },
        dashboard: {
            console_title: 'Console',
            start: 'Start Server',
            stop: 'Stop Server',
            state_running: 'Running',
            state_stopped: 'Stopped',
            server_info: 'Minecraft Server',
            online_players: 'Online Players',
            system_resource: 'System Load',
            cpu_usage: 'CPU Usage',
            mem_usage: 'Memory',
            send_cmd_placeholder: 'Send command...',
            send: 'Send',
            toast_sent: 'Command Sent',
            system: 'System'
        },
        files: {
            path: 'Path',
            operate: 'Batch Operation',
            new_folder: 'New Folder',
            new_file: 'New File',
            upload_tips: 'Drag & Drop files to upload',
            total: '{count} items',
            move: 'Move',
            copy: 'Copy',
            compress: 'Compress',
            disable: 'Disable',
            enable: 'Enable',
            modal_move_title: 'Move/Copy Files',
            modal_move_dest: 'Destination (relative to root)',
            modal_compress_title: 'Compress Files',
            modal_compress_name: 'Archive Name (.zip)',
            modal_new_folder: 'Folder Name',
            modal_new_file: 'File Name'
        },
        mods: {
            title: 'Mods List',
            upload_mod: 'Upload Mod',
            upload_placeholder: 'Click or Drag .jar files here',
            search_placeholder: 'Search mods...',
            version: 'Version',
            empty: 'No mods found'
        },
        players: {
            title: 'Player Manager',
            online_players: 'Online Players',
            no_online: 'No players online',
            whitelist: 'Whitelist',
            ops: 'Operators (OP)',
            bans: 'Banned Players',
            kick: 'Kick',
            ban: 'Ban',
            teleport: 'Teleport',
            gamemode: 'Gamemode',
            clear_inv: 'Clear Inv',
            kill: 'Kill'
        },
        backups: {
            create_snap: 'Create Snapshot',
            create_diff: 'Create Differential',
            restore: 'Restore',
            tips: 'Tip: Restore will stop the server and automatically backup current world.',
            list_title: 'Backup List',
            config: 'Config',
            type_full: 'Full',
            type_diff: 'Diff',
            confirm_restore_title: 'Confirm Restore',
            confirm_restore_msg: 'Are you sure you want to restore {name}? Server will stop and current world will be backed up.',
            progress_restoring: 'Restoring...',
            progress_unzipping: 'Unzipping...',
            restore_success: 'Restore Completed!',
            config_groups: {
                basic: 'Basic Settings',
                schedule: 'Schedule & Frequency',
                purge: 'Cleanup Policy',
                advanced: 'Advanced Options'
            },
            config_labels: {
                enabled: 'Enable Auto Backup',
                type: 'Backup Type',
                activity: 'Only When Active',
                save: 'Save Before Backup',
                freq_min: 'Min Interval (hours)',
                freq_max: 'Max Interval (hours)',
                freq_uptime: 'Use Uptime',
                freq_schedule: 'Schedule',
                purge_size: 'Max Size (GB)',
                purge_days: 'Keep Days',
                purge_count: 'Keep Count',
                compression: 'Compression Level',
                buffer: 'Buffer',
                path: 'Backup Path',
                blacklist: 'Blacklist'
            }
        },
        easyauth: {
            users: 'Users',
            registered: 'Registered',
            unregistered: 'Unregistered',
            password: 'Password',
            unregister: 'Unregister',
            confirm_unregister: 'Unregister player',
            config: 'Config',
            new_password_prompt: 'Enter new password (>4 chars):',
            new_password_placeholder: 'New Password...',
            config_groups: {
                login_session: 'Login & Session',
                global_password: 'Global Password',
                others: 'Others',
                restrictions: 'Restrictions (Unlogged)',
                rules: 'Rules'
            },
            config_labels: {
                premium_auto_login: 'Premium Auto Login',
                offline_by_default: 'Offline by Default',
                session_timeout: 'Session Timeout (s)',
                max_login_tries: 'Max Login Tries',
                kick_timeout: 'Kick Timeout (s)',
                enable_global_password: 'Enable Global Password',
                single_use_global_password: 'Single Use',
                hide_player_coords: 'Hide Coords',
                debug: 'Debug Mode',
                allow_chat: 'Allow Chat',
                allow_commands: 'Allow Commands',
                allow_movement: 'Allow Movement',
                allow_block_interaction: 'Allow Interaction',
                allow_block_breaking: 'Allow Breaking',
                hide_inventory: 'Hide Inventory',
                player_invulnerable: 'Invulnerable',
                min_password_length: 'Min Password Length',
                max_password_length: 'Max Password Length',
                username_regexp: 'Username Regex',
                enable_server_side_translation: 'Server Side Translation'
            }
        },
        voice: {
            title: 'Simple Voice Chat',
            general: 'General',
            port: 'Port',
            host: 'Voice Host',
            host_desc: 'Public IP/Domain. Required.',
            password: 'Password',
            saved: 'Config Saved (Restart Required)',
            restart_required: 'Restart server to apply changes.',
            quality_distance: 'Quality & Distance',
            max_distance: 'Max Distance',
            crouch_distance: 'Crouch Distance',
            whisper_distance: 'Whisper Distance',
            bitrate: 'Bitrate',
            max_packet_weight: 'Max Packet Weight'
        },
        properties: {
            title: 'Server Settings (server.properties)',
            filter: 'Filter settings...',
            restart_tips: 'Restart server to apply changes.',
            key: 'Key',
            value: 'Value',
            groups: {
                general: 'General',
                gameplay: 'Gameplay',
                world: 'World Generation',
                spawning: 'Spawning',
                network: 'Performance & Network'
            },
            labels: {
                motd: 'MOTD',
                port: 'Port',
                max_players: 'Max Players',
                online_mode: 'Online Mode',
                white_list: 'Whitelist',
                enable_rcon: 'Enable RCON',
                gamemode: 'Gamemode',
                force_gamemode: 'Force Gamemode',
                difficulty: 'Difficulty',
                hardcore: 'Hardcore',
                pvp: 'PVP',
                allow_flight: 'Allow Flight',
                level_seed: 'Seed',
                level_type: 'Level Type',
                level_name: 'Level Name',
                generate_structures: 'Generate Structures',
                allow_nether: 'Allow Nether',
                spawn_monsters: 'Spawn Monsters',
                spawn_animals: 'Spawn Animals',
                spawn_npcs: 'Spawn NPCs',
                view_distance: 'View Distance',
                simulation_distance: 'Simulation Distance',
                max_tick_time: 'Max Tick Time',
                rate_limit: 'Rate Limit'
            }
        },
        panel_settings: {
            title: 'Panel Settings',
            basic: 'Basic Settings',
            server: 'Server Configuration',
            security: 'Security Settings',
            advanced: 'Advanced Settings',
            port: 'Panel Port',
            port_desc: 'Requires panel restart',
            default_lang: 'Default Language',
            theme: 'Theme Mode',
            theme_light: 'Light',
            theme_dark: 'Dark',
            theme_auto: 'Auto',
            jar_name: 'JAR Filename',
            jar_name_desc: 'Server startup file',
            java_args: 'Java Arguments',
            java_args_desc: 'One argument per line, e.g. -Xms1G',
            secret: '2FA Secret',
            secret_masked: 'Secret is hidden',
            session_timeout: 'Session Timeout (days)',
            max_log_history: 'Max Log History',
            monitor_interval: 'Monitor Interval (ms)',
            reset_2fa: 'Reset 2FA',
            restart_panel: 'Restart Panel',
            restart_now: 'Restart Now',
            restart_later: 'Later',
            save_success: 'Configuration Saved',
            restart_required: 'Restart required to apply changes',
            restart_confirm: 'Configuration saved. Restart panel to apply changes?',
            reset_2fa_confirm: 'Reset 2FA? This will invalidate all logged-in devices. You will need to scan the QR code again.',
            restart_warning: 'Restarting the panel will disconnect all connections. Continue?',
            reset_2fa_success: '2FA Reset',
            reset_2fa_instruction: 'Please scan the new QR code with your authenticator',
            restarting: 'Panel is restarting...',
            validation_error: 'Validation Failed'
        }
    }
};

export const createI18n = (store) => {
    return (key, params = {}) => {
        const keys = key.split('.');
        let value = messages[store.lang];
        for (const k of keys) {
            value = value?.[k]; // Use optional chaining to prevent crash
            if (!value) return key;
        }
        // Simple interpolation {name}
        if (typeof value === 'string') {
            return value.replace(/{(\w+)}/g, (_, k) => params[k] !== undefined ? params[k] : `{${k}}`);
        }
        return value;
    };
};
